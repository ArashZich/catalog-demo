<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>AFA MED</title>
    <meta name="description" content="Catalog" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
    <script src="https://unpkg.com/aframe-outline@%5E1.1.0/build/aframe-outline.min.js"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
      crossorigin="anonymous"
    />

    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto%7CRoboto+Mono"
      media="all"
    />
    <link rel="stylesheet" type="text/css" href="index.css" />

    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>
    <script type="text/javascript">
      let checkExist = setInterval(function () {
        if (document.getElementById("arjsDebugUIContainer")) {
          let interface = document.getElementById("arjsDebugUIContainer");
          interface.remove();
        }
      }, 100);
      checkExist;
    </script>
    <script>
      AFRAME.registerComponent("video-vidhandler", {
        init: function () {
          this.toggle = false;
          this.vid = document.querySelector("#filervideo");
          this.vid.pause();
        },
        tick: function () {
          if (this.el.object3D.visible == true) {
            if (!this.toggle) {
              this.toggle = true;
              this.vid.play();
            }
          } else {
            this.toggle = false;
            this.vid.pause();
          }
        },
      });
    </script>

    <script>
      AFRAME.registerComponent("video-vidhandlerpoost", {
        init: function () {
          this.toggleMen = false;
          this.vidmen = document.querySelector("#poostvideo");
          this.vidmen.pause();
        },
        tick: function () {
          if (this.el.object3D.visible == true) {
            if (!this.toggleMen) {
              this.toggleMen = true;
              this.vidmen.play();
            }
          } else {
            this.toggleMen = false;
            this.vidmen.pause();
          }
        },
      });
    </script>
  </head>

  <body style="margin: 0px; overflow: hidden">
    <a-scene
      embedded
      inspector=""
      keyboard-shortcuts=""
      screenshot=""
      vr-mode-ui="enabled: false"
      ar-template
      aframe-inspector-removed-embedded="undefined"
      loading-screen="enabled: false;"
      renderer="logarithmicDepthBuffer: true;"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
      id="scene"
      gesture-detector
    >
      <canvas
        class="a-canvas"
        data-aframe-canvas="true"
        width="300"
        height="150"
      ></canvas>

      <a-assets>
        <video
          crossorigin="anonymous"
          preload="none"
          id="filervideo"
          loop="false"
          crossorigin
          webkit-playsinline
          playsinline
          controls
        >
          <source src="/assets/filer.webm" />
        </video>

        <video
          crossorigin="anonymous"
          preload="none"
          id="poostvideo"
          loop="false"
          crossorigin
          webkit-playsinline
          playsinline
          controls
        >
          <source src="/assets/poosti.webm" />
        </video>

        <img
          crossorigin="anonymous"
          id="phoneTexture"
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRCnY3tLbzqKVNUw81Kd8LE3xa2EJqr-MtjpSNWLa4lNepliuoxw"
        />
        <img
          crossorigin="anonymous"
          id="webTexture"
          src="https://static.vecteezy.com/system/resources/thumbnails/000/575/973/small/icon0-vector-437-01.jpg"
        />
      </a-assets>

      <a-marker
        camera="active:false"
        type="pattern"
        url="/assets/pattern-filer.patt"
        preset="custom"
        video-vidhandler
        emitevents="true"
        cursor="fuse: false; rayOrigin: mouse;"
      >
        <a-plane
          scale="1 1"
          position="0 0 0"
          rotation="-90 0 0"
          material="transparent:true;src:#filervideo"
          controls
          height="2.5"
          width="2.5"
        ></a-plane>

        <a-link
          class="clickable"
          href="tel:+989120471147"
          title=""
          image=""
          position=".8 0.0 1.7"
          rotation="-67.42 0 0"
          scale="0.6 0.6 0.6"
          geometry="primitive:circle;segments:64"
          material="shader:portal;side:double;visible:false"
          link="title:."
        >
          <a-box
            scale="0.8 0.8 1.05"
            material="src:#phoneTexture"
            position="-0.09854454977856898 -0.0036935886841299587 -0.2155814669584256"
            radius="2"
            segments-height="84"
            rotation="-23.450000000000003 0 0"
            geometry=""
          >
            <a-animation
              attribute="rotation"
              begin="mouseenter"
              loop="true"
              end="mouseleave"
              dur="2000"
              fill="backwards"
              to="335 360 360"
              ease="linear"
            ></a-animation>
          </a-box>
        </a-link>

        <a-link
          class="clickable"
          href="https://www.afamed.org/"
          title=""
          image=""
          position="-.7 0 1.7"
          rotation="-67.42 0 0"
          scale="0.6 0.6 0.6"
          geometry="primitive:circle;segments:64"
          material="shader:portal;side:double;visible:false"
          link="title:."
        >
          <a-box
            scale="0.8 0.8 1.05"
            material="src:#webTexture"
            position="-0.09854454977856898 -0.0036935886841299587 -0.2155814669584256"
            radius="2"
            segments-height="84"
            rotation="-23.450000000000003 0 0"
            geometry=""
          >
            <a-animation
              attribute="rotation"
              begin="mouseenter"
              loop="true"
              end="mouseleave"
              dur="2000"
              fill="backwards"
              to="335 360 360"
              ease="linear"
            ></a-animation>
          </a-box>
        </a-link>
      </a-marker>
      <!-- another maker -->
      <a-marker
        camera="active:false"
        type="pattern"
        url="/assets/pattern-poosti.patt"
        preset="custom"
        video-vidhandlerpoost
        emitevents="true"
        cursor="fuse: false; rayOrigin: mouse;"
      >
        <a-plane
          scale="1 1"
          position="0 0 0"
          rotation="-90 0 0"
          material="transparent:true;src:#poostvideo"
          controls
          height="2.5"
          width="2.5"
        ></a-plane>

        <a-link
          class="clickable"
          href="tel:+989120471147"
          title=""
          image=""
          position=".8 0.0 1.7"
          rotation="-67.42 0 0"
          scale="0.6 0.6 0.6"
          geometry="primitive:circle;segments:64"
          material="shader:portal;side:double;visible:false"
          link="title:."
        >
          <a-box
            scale="0.8 0.8 1.05"
            material="src:#phoneTexture"
            position="-0.09854454977856898 -0.0036935886841299587 -0.2155814669584256"
            radius="2"
            segments-height="84"
            rotation="-23.450000000000003 0 0"
            geometry=""
          >
            <a-animation
              attribute="rotation"
              begin="mouseenter"
              loop="true"
              end="mouseleave"
              dur="2000"
              fill="backwards"
              to="335 360 360"
              ease="linear"
            ></a-animation>
          </a-box>
        </a-link>

        <a-link
          class="clickable"
          href="https://www.afamed.org/"
          title=""
          image=""
          position="-.7 0 1.7"
          rotation="-67.42 0 0"
          scale="0.6 0.6 0.6"
          geometry="primitive:circle;segments:64"
          material="shader:portal;side:double;visible:false"
          link="title:."
        >
          <a-box
            scale="0.8 0.8 1.05"
            material="src:#webTexture"
            position="-0.09854454977856898 -0.0036935886841299587 -0.2155814669584256"
            radius="2"
            segments-height="84"
            rotation="-23.450000000000003 0 0"
            geometry=""
          >
            <a-animation
              attribute="rotation"
              begin="mouseenter"
              loop="true"
              end="mouseleave"
              dur="2000"
              fill="backwards"
              to="335 360 360"
              ease="linear"
            ></a-animation>
          </a-box>
        </a-link>
      </a-marker>

      <a-entity camera></a-entity>
      <a-entity
        cursor="fuse: true; fuseTimeout: 2000"
        raycaster="objects: .clickable"
        position="0 0 -1"
        scale="0.01 0.01 0.01"
        geometry="primitive: ring"
        material="color: white; shader: flat"
        rotation=""
        visible=""
      >
        <a-animation
          begin="fusing"
          easing="ease-in"
          attribute="scale"
          fill="backwards"
          from="0.01 0.01 0.01"
          to="0.02 0.02 0.02"
          dur="3000"
        ></a-animation>
        <a-animation
          begin="fusing"
          easing="ease-in"
          attribute="material.color"
          from="white"
          to="orange"
          dur="3000"
        ></a-animation>
      </a-entity>
    </a-scene>
  </body>
</html>
